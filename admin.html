<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ê–¥–º–∏–Ω–∫–∞ ‚Äî –í—ã–∑–æ–≤–î–¢–ü.—Ä—Ñ</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{margin:0;font-family:'Inter',sans-serif;background:#0B1118;color:white;}
header{background:#111827;padding:20px;text-align:center;font-size:24px;color:#2AABEE;font-weight:700;letter-spacing:1px;}
.container{max-width:1000px;margin:40px auto;padding:0 20px;}
.stats{display:flex;gap:20px;flex-wrap:wrap;margin-bottom:40px;}
.card{flex:1;background:#1B2735;padding:20px;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.3);transition:transform .3s;}
.card:hover{transform:translateY(-5px);}
.card h3{font-size:20px;color:#2AABEE;margin-bottom:10px;}
.card p{font-size:28px;font-weight:600;}
.chart-container{background:#1B2735;padding:20px;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.3);}
canvas{background:#0B1118;border-radius:10px;}
</style>
</head>
<body>

<header>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å ‚Äî –í—ã–∑–æ–≤–î–¢–ü.—Ä—Ñ</header>
<div class="container">
  <div class="stats">
    <div class="card">
      <h3>üìä –ü–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –≤—Å–µ–≥–æ</h3>
      <p id="visits">0</p>
    </div>
    <div class="card">
      <h3>üìû –í—ã–∑–æ–≤ –∫–æ–º–∏—Å—Å–∞—Ä–∞</h3>
      <p id="call-count">0</p>
    </div>
    <div class="card">
      <h3>üí¨ Telegram</h3>
      <p id="telegram-count">0</p>
    </div>
  </div>

  <div class="chart-container">
    <canvas id="clickChart"></canvas>
  </div>
</div>

<script type="module">
const BIN_ID = '6982762143b1c97be963181b';
const SECRET_KEY = '$2a$10$eF.toHw0KlZjlT38yizF1OwEIt6dSmQ/tkN3AbIxT6QcIoO2I.g.q';

async function fetchData(){
    const res = await fetch(`https://api.jsonbin.io/v3/b/${BIN_ID}/latest`, {
        headers:{'X-Master-Key':SECRET_KEY}
    });
    const data = await res.json();
    return data.record;
}

async function renderStats(){
    const data = await fetchData();

    document.getElementById('visits').textContent = data.visits;
    document.getElementById('call-count').textContent = data.clicks.call;
    document.getElementById('telegram-count').textContent = data.clicks.telegram;

    const ctx = document.getElementById('clickChart').getContext('2d');
    new Chart(ctx,{
        type:'bar',
        data:{
            labels:['üìû –í—ã–∑–æ–≤','üí¨ Telegram'],
            datasets:[{
                label:'–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∏–∫–æ–≤',
                data:[data.clicks.call,data.clicks.telegram],
                backgroundColor:['#2AABEE','#229ED9'],
                borderRadius:10
            }]
        },
        options:{
            responsive:true,
            plugins:{legend:{display:false}},
            scales:{y:{beginAtZero:true,ticks:{color:'white'}},x:{ticks:{color:'white'}}}
        }
    });
}

renderStats();
</script>
</body>
</html>
